---
title: "Aplicação do TRE"
output: 
  html_notebook: 
    number_sections: yes
    toc: yes
---

# Pré-configurações

```{r, message=FALSE, warning=FALSE}
# Limpando área
rm(list = ls())

# Carregando pacotes necessários
easypackages::libraries(
  c("dplyr", "tidyverse", "ggfortify", "lubridate", "modelr", "fs")
  )

# Carregando scripts necessários
source("../R/network-dists.R")
source("../R/get-aws-neighborhood.R")
source("../R/select-data-SRT.R")
source("../R/utils.R")
```

# Dados necessários


```{r}
check_disp_int_inmet_ok <- rio::import("../output/check_disp_int_inmet_ok.RDS")
check_disp_int_inmet_ok
```
```{r}
data <- rio::import("../output/tar-data-inmet-2008-2016-daily-interval60.RDS")
data
```


# Aplicação do TRE


Seleção dos dados diários.


```{r}
aws_target <- "A882"

check_disp_int_target <- filter(check_disp_int_inmet_ok, target == aws_target) %>%
  unnest()

neighbors_o <- c(aws_target, unique(check_disp_int_target$neighbors_checked))

data %>%
  dplyr::filter(
    site %in% neighbors_o,
    int %in% unique(check_disp_int_target$int)
  ) %>%
  spread(site, variable) %>%
  select(date, int, one_of(neighbors_o))

```


```{r}
# para cada ref 
#      roda teste espacial
```


<!-- Dados estruturados com formato sililar ao do exemplo de aplicação do método. O formato dos dados é com a data na 1ª coluna, a EMA de referência na 2ª coluna e as EMAs vizinhas nas demais colunas. -->

